/* kilocode_change - new file */

/* ========== Agent Monitor - Sidebar Panel ========== */

.agent-monitor {
	display: flex;
	flex-direction: column;
	height: 100%;
	font-size: 13px;
	color: var(--vscode-foreground);
	background: var(--vscode-sideBar-background, var(--vscode-editor-background));
	overflow: hidden;
}

/* kilocode_change start - Error banner */
.monitor-error-banner {
	display: flex;
	align-items: center;
	gap: 8px;
	padding: 6px 12px;
	background: var(--vscode-inputValidation-errorBackground, rgba(255, 0, 0, 0.1));
	border: 1px solid var(--vscode-inputValidation-errorBorder, #f44);
	color: var(--vscode-errorForeground, #f44);
	font-size: 12px;
	flex-shrink: 0;
}

.monitor-error-banner .error-icon {
	flex-shrink: 0;
}

.monitor-error-banner .error-text {
	flex: 1;
	overflow: hidden;
	text-overflow: ellipsis;
	white-space: nowrap;
}
/* kilocode_change end */

/* --- Status Bar --- */

.monitor-status-bar {
	display: flex;
	align-items: center;
	justify-content: space-between;
	padding: 6px 12px;
	border-bottom: 1px solid var(--vscode-panel-border);
	flex-shrink: 0;
}

.status-indicator {
	display: flex;
	align-items: center;
	gap: 6px;
}

.connection-dot {
	width: 8px;
	height: 8px;
	border-radius: 50%;
	background: var(--vscode-testing-iconFailed, #f44);
	transition: background 0.3s ease;
}

.connection-dot.connected {
	background: var(--vscode-testing-iconPassed, #4c4);
}

.status-text {
	font-size: 11px;
	color: var(--vscode-descriptionForeground);
}

.status-actions {
	display: flex;
	gap: 4px;
}

/* --- Sections Container --- */

.monitor-sections {
	flex: 1;
	overflow-y: auto;
	padding: 4px 0;
}

/* --- Section --- */

.monitor-section {
	padding: 0 8px;
}

.section-header {
	display: flex;
	align-items: center;
	gap: 6px;
	padding: 6px 4px;
	cursor: pointer;
	user-select: none;
	border-radius: 3px;
}

.section-header:hover {
	background: var(--vscode-list-hoverBackground);
}

.section-icon {
	font-size: 11px;
	width: 12px;
	flex-shrink: 0;
	color: var(--vscode-descriptionForeground);
}

.section-title {
	flex: 1;
	font-weight: 600;
	font-size: 12px;
	text-transform: uppercase;
	letter-spacing: 0.5px;
}

.section-content {
	padding: 4px 0 8px 18px;
}

.section-empty {
	font-size: 12px;
	color: var(--vscode-descriptionForeground);
	font-style: italic;
	padding: 4px 0;
}

/* --- Identity Details --- */

.identity-details {
	display: flex;
	flex-direction: column;
	gap: 3px;
}

.detail-row {
	display: flex;
	align-items: baseline;
	gap: 8px;
	font-size: 12px;
	padding: 1px 0;
}

.detail-label {
	min-width: 60px;
	color: var(--vscode-descriptionForeground);
	font-size: 11px;
	text-transform: uppercase;
	flex-shrink: 0;
}

.detail-value {
	flex: 1;
	word-break: break-all;
}

.detail-value.mono {
	font-family: var(--vscode-editor-font-family, monospace);
	font-size: 11px;
}

.detail-value.fingerprint {
	font-size: 10px;
	letter-spacing: 0.5px;
	color: var(--vscode-textLink-foreground);
}

.caps-list {
	display: flex;
	flex-wrap: wrap;
	gap: 3px;
}

.cap-badge {
	display: inline-block;
	background: var(--vscode-badge-background);
	color: var(--vscode-badge-foreground);
	padding: 1px 5px;
	border-radius: 8px;
	font-size: 10px;
	white-space: nowrap;
}

/* --- Agents List --- */

.agents-list {
	display: flex;
	flex-direction: column;
	gap: 6px;
}

.agent-row {
	padding: 6px 8px;
	border-radius: 4px;
	background: var(--vscode-editor-background);
	border-left: 3px solid transparent;
}

.agent-row.status-idle {
	border-left-color: var(--vscode-descriptionForeground);
}

.agent-row.status-busy {
	border-left-color: var(--vscode-testing-iconPassed, #4c4);
}

.agent-row.status-offline {
	border-left-color: var(--vscode-testing-iconFailed, #f44);
	opacity: 0.7;
}

.agent-row-header {
	display: flex;
	align-items: center;
	gap: 5px;
}

.agent-row-icon {
	font-size: 12px;
	flex-shrink: 0;
}

.agent-row-name {
	flex: 1;
	font-weight: 500;
	font-size: 12px;
}

.status-dot {
	width: 6px;
	height: 6px;
	border-radius: 50%;
	flex-shrink: 0;
}

.status-dot.status-idle {
	background: var(--vscode-descriptionForeground);
}

.status-dot.status-busy {
	background: var(--vscode-testing-iconPassed, #4c4);
	animation: pulse 1.5s infinite;
}

.status-dot.status-offline {
	background: var(--vscode-testing-iconFailed, #f44);
}

@keyframes pulse {
	0%, 100% { opacity: 1; }
	50% { opacity: 0.4; }
}

.agent-row-task {
	font-size: 11px;
	color: var(--vscode-descriptionForeground);
	padding: 2px 0 0 20px;
	white-space: nowrap;
	overflow: hidden;
	text-overflow: ellipsis;
}

.agent-row-meta {
	display: flex;
	align-items: center;
	gap: 6px;
	padding: 2px 0 0 20px;
	font-size: 10px;
	color: var(--vscode-descriptionForeground);
}

.meta-tag {
	background: var(--vscode-badge-background);
	color: var(--vscode-badge-foreground);
	padding: 0 4px;
	border-radius: 3px;
	font-size: 10px;
}

.meta-time {
	margin-left: auto;
}

/* --- Queue / Team Stats --- */

.team-stats {
	margin-bottom: 6px;
	padding-bottom: 6px;
	border-bottom: 1px solid var(--vscode-panel-border);
}

.queue-empty {
	color: var(--vscode-testing-iconPassed, #4c4);
}

.queue-count {
	color: var(--vscode-notificationsWarningIcon-foreground, #fb0);
	font-weight: 500;
}

/* --- Messages List --- */

.messages-section .section-content {
	padding-right: 4px;
}

.messages-list {
	max-height: 300px;
	overflow-y: auto;
}

.message-row {
	padding: 4px 6px;
	border-radius: 3px;
	margin-bottom: 3px;
	background: var(--vscode-editor-background);
	border-left: 2px solid transparent;
}

.message-row.type-message {
	border-left-color: var(--vscode-textLink-foreground);
}

.message-row.type-status {
	border-left-color: var(--vscode-descriptionForeground);
}

.message-row.type-result {
	border-left-color: var(--vscode-testing-iconPassed, #4c4);
}

.message-row.type-error {
	border-left-color: var(--vscode-testing-iconFailed, #f44);
}

.message-row.type-command {
	border-left-color: var(--vscode-notificationsWarningIcon-foreground, #fb0);
}

.message-header {
	display: flex;
	align-items: center;
	gap: 4px;
	font-size: 10px;
	color: var(--vscode-descriptionForeground);
	margin-bottom: 2px;
}

.message-from {
	font-weight: 600;
	color: var(--vscode-textLink-foreground);
	font-family: var(--vscode-editor-font-family, monospace);
}

.message-arrow {
	color: var(--vscode-descriptionForeground);
}

.message-to {
	font-family: var(--vscode-editor-font-family, monospace);
}

.message-time {
	margin-left: auto;
	font-size: 10px;
}

.message-content {
	font-size: 12px;
	line-height: 1.4;
	word-break: break-word;
	white-space: pre-wrap;
}

/* --- Footer --- */

.monitor-footer {
	padding: 4px 12px;
	border-top: 1px solid var(--vscode-panel-border);
	flex-shrink: 0;
}

.footer-text {
	font-size: 10px;
	color: var(--vscode-descriptionForeground);
}

/* --- VSCode Divider overrides --- */

.monitor-sections vscode-divider {
	margin: 2px 8px;
}
